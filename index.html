<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TX1 PRO CRYPTO IDX v2.0</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <!-- Seção de Login -->
    <div id="login-section" class="login-container">
      <div class="login-header">
        <i class="fa-solid fa-chart-line"></i>
        <h2>CONEXÃO STOCKITY</h2>
      </div>
      <form id="login-form">
        <div class="input-group">
          <i class="fa-solid fa-envelope"></i>
          <input type="email" id="stockity-email" placeholder="Email" required>
        </div>
        <div class="input-group">
          <i class="fa-solid fa-lock"></i>
          <input type="password" id="stockity-password" placeholder="Senha" required>
        </div>
        <button type="submit" id="connect-btn">
          <i class="fa-solid fa-plug"></i> CONECTAR
        </button>
      </form>
      <p id="login-status"></p>
    </div>

    <!-- Painel Principal (inicialmente oculto) -->
    <div id="main-panel" class="hidden">
      <div class="header">
        <div class="title">
          <i class="fa-solid fa-coins"></i>
          <h1>TX1 PRO CRYPTO IDX v2.0</h1>
        </div>
        <div class="account-info">
          <span id="account-email"></span>
          <button id="logout-btn"><i class="fa-solid fa-right-from-bracket"></i></button>
        </div>
      </div>

      <div class="painel-central">
        <div class="coluna-esquerda">
          <div class="signal-card">
            <div class="signal-header">
              <span>SINAL ATUAL</span>
              <span id="hora">--:--:--</span>
            </div>
            <div id="comando" class="signal-display esperar">ESPERAR ✋</div>
            <div id="score" class="confidence">CONFIANÇA: --%</div>
          </div>

          <div class="info-card">
            <div class="info-header">
              <i class="fa-solid fa-gauge-high"></i>
              <h3>CONTROLE DE RISCO</h3>
            </div>
            <div class="risk-metrics">
              <div>
                <span>Exposição:</span>
                <span id="exposicao">0.00%</span>
              </div>
              <div>
                <span>Volatilidade:</span>
                <span id="volatilidade">0.00%</span>
              </div>
              <div>
                <span>Stop Loss:</span>
                <span id="stoploss">-</span>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-win" onclick="registrar('WIN')">
              <i class="fa-solid fa-trophy"></i> REGISTRAR WIN
            </button>
            <button class="btn-loss" onclick="registrar('LOSS')">
              <i class="fa-solid fa-bug"></i> REGISTRAR LOSS
            </button>
          </div>
        </div>

        <div class="coluna-direita">
          <div class="info-card">
            <div class="info-header">
              <i class="fa-solid fa-chart-simple"></i>
              <h3>ANÁLISE TÉCNICA</h3>
            </div>
            <div class="indicators">
              <div>
                <span>Tendência M1:</span>
                <span id="m1-trend" class="trend">-</span>
              </div>
              <div>
                <span>RSI M1:</span>
                <span id="m1-rsi">-</span>
              </div>
              <div>
                <span>Volume:</span>
                <span id="m1-volume">-</span>
              </div>
            </div>
          </div>

          <div class="info-card">
            <div class="info-header">
              <i class="fa-solid fa-arrow-trend-up"></i>
              <h3>DESEMPENHO</h3>
            </div>
            <div class="performance">
              <div class="win-loss">
                <div>
                  <span>WIN:</span>
                  <span id="win-count" class="win-count">0</span>
                </div>
                <div>
                  <span>LOSS:</span>
                  <span id="loss-count" class="loss-count">0</span>
                </div>
                <div>
                  <span>ACERTO:</span>
                  <span id="success-rate" class="success-rate">0%</span>
                </div>
              </div>
            </div>
          </div>

          <div class="info-card">
            <div class="info-header">
              <i class="fa-solid fa-rotate"></i>
              <h3>PRÓXIMO REBALANCEAMENTO</h3>
            </div>
            <p id="rebalanceamento" class="rebalance-info">Carregando...</p>
          </div>
        </div>
      </div>

      <div class="composition-section">
        <h3><i class="fa-solid fa-pie-chart"></i> COMPOSIÇÃO DO CRYPTO IDX</h3>
        <ul id="composicao"></ul>
      </div>

      <div class="historico-section">
        <h3><i class="fa-solid fa-clock-rotate-left"></i> ÚLTIMOS SINAIS</h3>
        <ul id="ultimos"></ul>
      </div>

      <iframe class="grafico" src="https://s.tradingview.com/widgetembed/?symbol=STOCKITY:CRYPTO_IDX&interval=1&theme=dark"
        width="100%" height="300" frameborder="0"></iframe>
    </div>
  </div>

  <audio id="som-call" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
  <audio id="som-put" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
  <script src="script.js"></script>
</body>
</html>
